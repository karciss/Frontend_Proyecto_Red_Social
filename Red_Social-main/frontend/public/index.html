<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Red Social Universitaria - Módulo Académico, Social y Carpooling"
    />
    <title>Red Social Universitaria</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS para mapas -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      #root {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <noscript>Necesitas habilitar JavaScript para ejecutar esta aplicación.</noscript>
    <div id="root"></div>
    <!-- Ensure translationService exists before main bundle executes -->
    <script>
      if (!window.translationService) {
        window.translationService = {
          translate: (k, d) => d || k,
          changeLanguage: (lang) => Promise.resolve(),
          getCurrentLanguage: () => 'es'
        };
      }
    </script>
    <!-- Temporary error overlay for production debugging -->
    <div id="error-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);color:#fff;padding:20px;z-index:9999;overflow:auto;">
      <div style="max-width:900px;margin:40px auto;background:#2b2b2b;padding:16px;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.6)">
        <h2 style="margin:0 0 8px 0;font-family:Roboto, sans-serif;">Error de JavaScript</h2>
        <pre id="error-overlay-message" style="white-space:pre-wrap;color:#f8f8f2;font-family:monospace;max-height:70vh;overflow:auto;margin:0;padding:0"></pre>
        <div style="margin-top:12px;text-align:right;">
          <button id="error-overlay-close" style="background:#ff6b6b;border:none;color:#fff;padding:8px 12px;border-radius:4px;cursor:pointer">Cerrar</button>
        </div>
      </div>
    </div>
    <script>
      // Simple global error handler to surface runtime exceptions in production
      (function() {
        function showError(message) {
          try {
            var overlay = document.getElementById('error-overlay');
            var msg = document.getElementById('error-overlay-message');
            if (!overlay || !msg) return;
            msg.textContent = message;
            overlay.style.display = 'block';
          } catch (e) {
            // nothing
          }
        }

        window.addEventListener('error', function (e) {
          var text = 'Error: ' + (e && e.message ? e.message : String(e));
          if (e && e.filename) text += '\nAt: ' + e.filename + ':' + e.lineno + ':' + e.colno;
          if (e && e.error && e.error.stack) text += '\nStack:\n' + e.error.stack;
          showError(text);
        });

        window.addEventListener('unhandledrejection', function (e) {
          var reason = e && e.reason ? (e.reason.stack || e.reason) : String(e);
          showError('Unhandled Rejection: ' + reason);
        });

        document.addEventListener('click', function (evt) {
          if (evt.target && evt.target.id === 'error-overlay-close') {
            var overlay = document.getElementById('error-overlay');
            if (overlay) overlay.style.display = 'none';
          }
        });
      })();
    </script>
  </body>
</html>
